<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Under the Hood: Using the Data Generated by Sakai</title>

<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="true" />
<!-- style sheet links -->
<link rel="stylesheet" href="js/s5/ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="js/s5/ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="js/s5/ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="js/s5/ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- S5 JS -->
<script src="js/s5/ui/default/slides.js" type="text/javascript"></script>

</head>

<body>

<div class="layout">
	<div id="controls"><!-- DO NOT EDIT --></div>
	<div id="currentSlide"><!-- DO NOT EDIT --></div>
	<div id="header"></div>
	<div id="footer">
		<h1>June 16, 2010</h1>
		<h2>Under the Hood: Using the Data Generated by Sakai</h2>
	</div>
</div>

<div class="presentation">

<div class="slide">
<h1>Under the Hood: Using the Data Generated by Sakai</h1>
<h3>R.P. (Adi) Aditya</h3>
<h4>&copy; 2010</h4>
</div>

<div class="slide">

A running Sakai installation produces a lot of system data. To manage
the flow we have to be able to see noteworthy events and trends "at a
glance".

	<center>
		<table border="0"><tr valign="top">
		<td><img alt="ctools sakai all events" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_021.png"/></td>
		<td><img alt="ctools sakai all events excep seleectd" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_020.png" /></td>
		</tr></table>
	</center>

</div>

<div class="slide">

Data is collected from diverse sources, but it is stored in a
consistent format -- as timeseries data, space-efficient, consolidated
over time since we care less about the details of the long-past than
the general trends.

	<center>
		<img src="maps/ctstats-simple.png" width="640" height="480" />
	</center>

</div>

<div class="slide">

	<center>
		<table border="0"><tr valign="top">
		<td><img alt="ctools req/resp bytes" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_019.png"/></td>
		<td><img alt="ctools req resp hits" src="ctstats/ctools-appservers-042810-0826_files/drraw_027.png" /></td>
		</tr></table>
	</center>

	<ul>
		<li>Time flows from left to right, with the right-hand end of the graph being "now".</li>

		<li>Often show different data to compare against on
negative x-axis, doesn't mean values are < 0 really</li>

		<li>We have limited colors (that we can easily
distinguish) so some repetition, so use legend and tabular data to
narrow down what is where</li>

	</ul>

</div>

<div class="slide">
	<center>
		<table border="0"><tr valign="top">
			<td><img alt="tts" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_004.png"/></td>
			<td><img alt="appserver cpu" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_006.png" /></td>
		</table>
	</center>
	<ul>
		<li>we can see that response time (time to first byte) doesn't track appserver cpu strongly</li>
	</ul>
</div>
<div class="slide">
	<ul>
		<li>maybe it tracks the db response time?</li>
	</ul>
	<center>
		<table border="0"><tr valign="top">
			<td><img alt="tts" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_004.png"/></td>
			<td><img alt="db tts" src="ctstats/db-ctools-042810-0826_files/drraw_026.png"/></td>
		<tr>
		<tr valign="top">
			<td></td>
			<td><img alt="db cpu" src="ctstats/db-ctools-042810-0826_files/drraw_030.png" /></td>
		</tr></table>
	</center>
</slide>

<div class="slide">
	<ul>
		<li>most likely is Sakai tool usage</li>
	</ul>
	<center>
		<table border="0"><tr valign="top">
			<td><img alt="tts" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_004.png"/></td>
			<td><img alt="tool tts" src="ctstats/ctools-executive-overview-042810-0819_files/drraw_024.png"/></td>
		</tr></table>
	</center>
</div>

<div class="slide">
	<center>
		<table border="0">
			<tr valign="top">
				<td><img src="ctstats/ctools-overview-brief-042810-0828_files/drraw_009.png" /></td>
				<td><img src="ctstats/ctools-executive-overview-042810-0819_files/drraw_016.png" /></td>
			</tr>
		</table>
	</center>
	<ul>
		<li>Data for first graph comes directly from the Sakai tables</li>
		<li>hard to check outside of Sakai since notions of
users and sessions is Sakai specific (doesn't conform to Servlet API),
so best check is TCP connections

		</li>
		
	</ul>

</div>

<div class="slide">

Longer term trends (1 year in this case) are also interesting to see
and here is an example from data collected directly from Sakai tables:

	<center>
		<table border="0">
			<tr valign="top">
				<td><img alt="site type" src="ctstats/ctools-app-misc-1yr_files/drraw_002.png" /></td>
				<td><img alt="realm count" src="ctstats/ctools-app-misc-1yr_files/drraw_008.png" /></td>
			</tr>
		</table>
	</center>

</div>

<div class="slide">

Load-testing system data -- so we can "see" how close to production it looks for a given test:

	<center>
		<table border="0">
			<tr valign="top">
				<td><img alt="ctload tts by tool" src="ctstats/ctoolsload-executive_files/drraw_065.png" /></td>
				<td><img alt="ctload all sakai events" src="ctstats/ctoolsload-executive_files/drraw_070.png" /></td>
			</tr>
		</table>
	</center>

</div>

<div class="slide">

We need the realtime data, plus the trends to be widely available to
everyone supporting the application. In fact, it is useful to compare
different Sakai instances, so we make it globally, publically
available at:

<p>
<h3>http://ctstats.ds.itd.umich.edu</h3>
</p>

</div>

<div class="slide">

More detail about how we collect this data will be available in
tomorrow morning's session (#156 10am Grand Mesa A) called "Unraveling
the runtime behavior of Sakai" with David Haines.

</div>

<div class="slide">
	<a href="maps/ctools-system-pres.svg">System map</a>
</div>


</div>
</body>
</html>
